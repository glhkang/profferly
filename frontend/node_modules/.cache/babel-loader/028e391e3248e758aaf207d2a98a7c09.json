{"ast":null,"code":"var _jsxFileName = \"/Users/catherinekimyj/Desktop/profferly/frontend/src/components/likesdislikes/likes_dislikes.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Tooltip } from \"antd\";\nimport Icon, { DislikeOutlined, LikeOutlined, DislikeTwoTone, LikeTwoTone, LikeFilled, DislikeFilled } from \"@ant-design/icons\";\nimport Axios from \"axios\";\n\nconst LikesDislikes = ({\n  postId,\n  userId,\n  currentUserId\n}) => {\n  const [Likes, setLikes] = useState(0);\n  const [Dislikes, setDislikes] = useState(0);\n  const [LikeAction, setLikeAction] = useState(null);\n  const [DislikeAction, setDislikeAction] = useState(null);\n  const [likeIcon, setLikeIcon] = useState(LikeOutlined);\n  const [dislikeIcon, setDislikeIcon] = useState(DislikeOutlined);\n  let obj = {};\n\n  if (postId) {\n    obj = {\n      postId: postId,\n      userId: currentUserId\n    };\n  }\n\n  useEffect(() => {\n    Axios.post(\"/api/likes/getLikes\", obj).then(response => {\n      if (response.data.success) {\n        setLikes(response.data.likes.length);\n\n        if (response.data.likes.map(like => like.userId).includes(currentUserId)) {\n          setLikeIcon(LikeTwoTone);\n        } else if (!response.data.likes.map(like => like.userId).includes(currentUserId) && response.data.likes.length > 0) {\n          setLikeIcon(LikeFilled);\n        }\n      } else {\n        alert(\"Could not get likes\");\n      }\n    });\n    Axios.post(\"/api/likes/getDislikes\", obj).then(response => {\n      if (response.data.success) {\n        setDislikes(response.data.dislikes.length);\n\n        if (response.data.dislikes.map(dislike => dislike.userId).includes(currentUserId)) {\n          setDislikeIcon(DislikeTwoTone);\n        } else if (!response.data.dislikes.map(dislike => dislike.userId).includes(currentUserId) && response.data.dislikes.length > 0) {\n          setDislikeIcon(DislikeFilled);\n        }\n      } else {\n        alert(\"Could not get dislikes\");\n      }\n    });\n  }, []);\n  let likeIds = [];\n  let dislikeIds = [];\n  Axios.post(\"/api/likes/getLikes\", obj).then(response => {\n    if (response.data.success) {\n      likeIds = response.data.likes.map(like => like.userId);\n    }\n  });\n  Axios.post(\"/api/likes/getDislikes\", obj).then(response => {\n    if (response.data.success) {\n      dislikeIds = response.data.dislikes.map(dislike => dislike.userId);\n    }\n  });\n\n  const onLike = () => {\n    if (LikeAction === null && !likeIds.includes(currentUserId) && !dislikeIds.includes(currentUserId)) {\n      Axios.post(\"/api/likes/upLike\", obj).then(response => {\n        if (response.data.success) {\n          setLikes(Likes + 1);\n          setLikeAction(\"liked\");\n          setLikeIcon(LikeTwoTone);\n        } else {\n          alert(\"Already liked\");\n        }\n      });\n    } else if (LikeAction === null && !likeIds.includes(currentUserId) && dislikeIds.includes(currentUserId)) {\n      Axios.post(\"/api/likes/upLike\", obj).then(response => {\n        if (response.data.success && dislikeIds.length >= 2) {\n          setLikes(Likes + 1);\n          setLikeAction(\"liked\");\n          setLikeIcon(LikeTwoTone);\n          setDislikeAction(null);\n          setDislikes(Dislikes - 1);\n          setDislikeIcon(DislikeFilled);\n        } else if (response.data.success && dislikeIds.length === 1) {\n          setLikes(Likes + 1);\n          setLikeAction(\"liked\");\n          setLikeIcon(LikeTwoTone);\n          setDislikeAction(null);\n          setDislikes(Dislikes - 1);\n          setDislikeIcon(DislikeOutlined);\n        } else {\n          alert(\"Already liked\");\n        }\n      });\n    } else {\n      Axios.post(\"/api/likes/unLike\", obj).then(response => {\n        if (response.data.success && likeIds.length === 1) {\n          setLikes(Likes - 1);\n          setLikeAction(null);\n          setLikeIcon(LikeOutlined);\n        } else if (response.data.success && likeIds.length > 1) {\n          setLikes(Likes - 1);\n          setLikeAction(null);\n          setLikeIcon(LikeFilled);\n        } else {\n          alert(\"Could not unlike\");\n        }\n      });\n    }\n  };\n\n  const onDislike = () => {\n    if (DislikeAction === null && !dislikeIds.includes(currentUserId) && !likeIds.includes(currentUserId)) {\n      Axios.post(\"/api/likes/upDislike\", obj).then(response => {\n        if (response.data.success) {\n          setDislikes(Dislikes + 1);\n          setDislikeAction(\"disliked\");\n          setDislikeIcon(DislikeTwoTone);\n        } else {\n          alert(\"Could not add dislike\");\n        }\n      });\n    } else if (DislikeAction === null && !dislikeIds.includes(currentUserId) && likeIds.includes(currentUserId)) {\n      Axios.post(\"/api/likes/upDislike\", obj).then(response => {\n        if (response.data.success && likeIds.length >= 2) {\n          setDislikes(Dislikes + 1);\n          setDislikeAction(\"disliked\");\n          setDislikeIcon(DislikeTwoTone);\n          setLikeAction(null);\n          setLikes(Likes - 1);\n          setLikeIcon(LikeFilled);\n        } else if (response.data.success && likeIds.length === 1) {\n          setDislikes(Dislikes + 1);\n          setDislikeAction(\"disliked\");\n          setDislikeIcon(DislikeTwoTone);\n          setLikeAction(null);\n          setLikes(Likes - 1);\n          setLikeIcon(LikeOutlined);\n        } else {\n          alert(\"Could not add dislike\");\n        }\n      });\n    } else {\n      Axios.post(\"/api/likes/unDislike\", obj).then(response => {\n        if (response.data.success && dislikeIds.length === 1) {\n          setDislikes(Dislikes - 1);\n          setDislikeAction(null);\n          setDislikeIcon(DislikeOutlined);\n        } else if (response.data.success && dislikeIds.length > 1) {\n          setDislikes(Dislikes - 1);\n          setDislikeAction(null);\n          setDislikeIcon(DislikeFilled);\n        } else {\n          alert(\"Could not decrease dislike\");\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post-like-dislikes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    key: \"post-like\",\n    className: \"post-like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    component: likeIcon,\n    onClick: onLike,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      paddingLeft: \"5px\",\n      cursor: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }\n  }, Likes)), /*#__PURE__*/React.createElement(\"span\", {\n    key: \"post-dislike\",\n    className: \"post-dislike\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    component: dislikeIcon,\n    onClick: onDislike,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      paddingLeft: \"5px\",\n      cursor: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, Dislikes))));\n};\n\nexport default LikesDislikes;","map":{"version":3,"sources":["/Users/catherinekimyj/Desktop/profferly/frontend/src/components/likesdislikes/likes_dislikes.js"],"names":["React","useEffect","useState","Tooltip","Icon","DislikeOutlined","LikeOutlined","DislikeTwoTone","LikeTwoTone","LikeFilled","DislikeFilled","Axios","LikesDislikes","postId","userId","currentUserId","Likes","setLikes","Dislikes","setDislikes","LikeAction","setLikeAction","DislikeAction","setDislikeAction","likeIcon","setLikeIcon","dislikeIcon","setDislikeIcon","obj","post","then","response","data","success","likes","length","map","like","includes","alert","dislikes","dislike","likeIds","dislikeIds","onLike","onDislike","paddingLeft","cursor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Tooltip } from \"antd\";\nimport Icon, {\n  DislikeOutlined,\n  LikeOutlined,\n  DislikeTwoTone,\n  LikeTwoTone,\n  LikeFilled,\n  DislikeFilled,\n} from \"@ant-design/icons\";\nimport Axios from \"axios\";\n\nconst LikesDislikes = ({ postId, userId, currentUserId }) => {\n  const [Likes, setLikes] = useState(0);\n  const [Dislikes, setDislikes] = useState(0);\n  const [LikeAction, setLikeAction] = useState(null);\n  const [DislikeAction, setDislikeAction] = useState(null);\n  const [likeIcon, setLikeIcon] = useState(LikeOutlined);\n  const [dislikeIcon, setDislikeIcon] = useState(DislikeOutlined);\n\n  let obj = {};\n  if (postId) {\n    obj = { postId: postId, userId: currentUserId };\n  }\n\n  useEffect(() => {\n    Axios.post(\"/api/likes/getLikes\", obj).then((response) => {\n      if (response.data.success) {\n        setLikes(response.data.likes.length);\n        if (\n          response.data.likes.map((like) => like.userId).includes(currentUserId)\n        ) {\n          setLikeIcon(LikeTwoTone);\n        } else if (\n          !response.data.likes\n            .map((like) => like.userId)\n            .includes(currentUserId) &&\n          response.data.likes.length > 0\n        ) {\n          setLikeIcon(LikeFilled);\n        }\n      } else {\n        alert(\"Could not get likes\");\n      }\n    });\n\n    Axios.post(\"/api/likes/getDislikes\", obj).then((response) => {\n      if (response.data.success) {\n        setDislikes(response.data.dislikes.length);\n        if (\n          response.data.dislikes\n            .map((dislike) => dislike.userId)\n            .includes(currentUserId)\n        ) {\n          setDislikeIcon(DislikeTwoTone);\n        } else if (\n          !response.data.dislikes\n            .map((dislike) => dislike.userId)\n            .includes(currentUserId) &&\n          response.data.dislikes.length > 0\n        ) {\n          setDislikeIcon(DislikeFilled);\n        }\n      } else {\n        alert(\"Could not get dislikes\");\n      }\n    });\n  }, []);\n\n  let likeIds = [];\n  let dislikeIds = [];\n  Axios.post(\"/api/likes/getLikes\", obj).then((response) => {\n    if (response.data.success) {\n      likeIds = response.data.likes.map((like) => like.userId);\n    }\n  });\n  Axios.post(\"/api/likes/getDislikes\", obj).then((response) => {\n    if (response.data.success) {\n      dislikeIds = response.data.dislikes.map((dislike) => dislike.userId);\n    }\n  });\n\n  const onLike = () => {\n    if (\n      LikeAction === null &&\n      !likeIds.includes(currentUserId) &&\n      !dislikeIds.includes(currentUserId)\n    ) {\n      Axios.post(\"/api/likes/upLike\", obj).then((response) => {\n        if (response.data.success) {\n          setLikes(Likes + 1);\n          setLikeAction(\"liked\");\n          setLikeIcon(LikeTwoTone);\n        } else {\n          alert(\"Already liked\");\n        }\n      });\n    } else if (\n      LikeAction === null &&\n      !likeIds.includes(currentUserId) &&\n      dislikeIds.includes(currentUserId)\n    ) {\n      Axios.post(\"/api/likes/upLike\", obj).then((response) => {\n        if (response.data.success && dislikeIds.length >= 2) {\n          setLikes(Likes + 1);\n          setLikeAction(\"liked\");\n          setLikeIcon(LikeTwoTone);\n          setDislikeAction(null);\n          setDislikes(Dislikes - 1);\n          setDislikeIcon(DislikeFilled);\n        } else if (response.data.success && dislikeIds.length === 1) {\n          setLikes(Likes + 1);\n          setLikeAction(\"liked\");\n          setLikeIcon(LikeTwoTone);\n          setDislikeAction(null);\n          setDislikes(Dislikes - 1);\n          setDislikeIcon(DislikeOutlined);\n        } else {\n          alert(\"Already liked\");\n        }\n      });\n    } else {\n      Axios.post(\"/api/likes/unLike\", obj).then((response) => {\n        if (response.data.success && likeIds.length === 1) {\n          setLikes(Likes - 1);\n          setLikeAction(null);\n          setLikeIcon(LikeOutlined);\n        } else if (response.data.success && likeIds.length > 1) {\n          setLikes(Likes - 1);\n          setLikeAction(null);\n          setLikeIcon(LikeFilled);\n        } else {\n          alert(\"Could not unlike\");\n        }\n      });\n    }\n  };\n\n  const onDislike = () => {\n    if (\n      DislikeAction === null &&\n      !dislikeIds.includes(currentUserId) &&\n      !likeIds.includes(currentUserId)\n    ) {\n      Axios.post(\"/api/likes/upDislike\", obj).then((response) => {\n        if (response.data.success) {\n          setDislikes(Dislikes + 1);\n          setDislikeAction(\"disliked\");\n          setDislikeIcon(DislikeTwoTone);\n        } else {\n          alert(\"Could not add dislike\");\n        }\n      });\n    } else if (\n      DislikeAction === null &&\n      !dislikeIds.includes(currentUserId) &&\n      likeIds.includes(currentUserId)\n    ) {\n      Axios.post(\"/api/likes/upDislike\", obj).then((response) => {\n        if (response.data.success && likeIds.length >= 2) {\n          setDislikes(Dislikes + 1);\n          setDislikeAction(\"disliked\");\n          setDislikeIcon(DislikeTwoTone);\n          setLikeAction(null);\n          setLikes(Likes - 1);\n          setLikeIcon(LikeFilled);\n        } else if (response.data.success && likeIds.length === 1) {\n          setDislikes(Dislikes + 1);\n          setDislikeAction(\"disliked\");\n          setDislikeIcon(DislikeTwoTone);\n          setLikeAction(null);\n          setLikes(Likes - 1);\n          setLikeIcon(LikeOutlined);\n        } else {\n          alert(\"Could not add dislike\");\n        }\n      });\n    } else {\n      Axios.post(\"/api/likes/unDislike\", obj).then((response) => {\n        if (response.data.success && dislikeIds.length === 1) {\n          setDislikes(Dislikes - 1);\n          setDislikeAction(null);\n          setDislikeIcon(DislikeOutlined);\n        } else if (response.data.success && dislikeIds.length > 1) {\n          setDislikes(Dislikes - 1);\n          setDislikeAction(null);\n          setDislikeIcon(DislikeFilled);\n        } else {\n          alert(\"Could not decrease dislike\");\n        }\n      });\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"post-like-dislikes\">\n        <span key=\"post-like\" className=\"post-like\">\n          <Tooltip>\n            <Icon component={likeIcon} onClick={onLike} />\n          </Tooltip>\n          <span style={{ paddingLeft: \"5px\", cursor: \"auto\" }}>{Likes}</span>\n        </span>\n        <span key=\"post-dislike\" className=\"post-dislike\">\n          <Tooltip>\n            <Icon component={dislikeIcon} onClick={onDislike} />\n          </Tooltip>\n          <span style={{ paddingLeft: \"5px\", cursor: \"auto\" }}>{Dislikes}</span>\n        </span>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default LikesDislikes;\n"]},"metadata":{},"sourceType":"module"}