{"ast":null,"code":"import _classCallCheck from\"/Users/catherinekimyj/Desktop/profferly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/catherinekimyj/Desktop/profferly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/catherinekimyj/Desktop/profferly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/catherinekimyj/Desktop/profferly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/catherinekimyj/Desktop/profferly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Moment from\"react-moment\";import\"./post.css\";import CommentsList from\"../comments/comments_list\";import CommentForm from\"../comments/comment_form\";import LikesDislikes from\"../likesdislikes/likes_dislikes\";var PostItem=/*#__PURE__*/function(_React$Component){_inherits(PostItem,_React$Component);var _super=_createSuper(PostItem);function PostItem(props){var _this;_classCallCheck(this,PostItem);_this=_super.call(this,props);_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));_this.handleButton=_this.handleButton.bind(_assertThisInitialized(_this));_this.state={showComments:false,commentDisplayText:\"Show Comments\"};return _this;}_createClass(PostItem,[{key:\"handleClick\",value:function handleClick(){this.props.history.push(\"/users/\".concat(this.props.post.user));}},{key:\"handleButton\",value:function handleButton(e){e.preventDefault();this.props.removePost(this.props.post._id);this.props.history.go();}},{key:\"onClick\",value:function onClick(){if(this.state.commentDisplayText===\"Show Comments\"){this.setState(function(prevState){return{showComments:!prevState.showComments,commentDisplayText:\"Hide Comments\"};});}else{this.setState(function(prevState){return{showComments:!prevState.showComments,commentDisplayText:\"Show Comments\"};});}}},{key:\"render\",value:function render(){var _this2=this;var post=this.props.post;var user=this.props.users[this.props.post.user];var dateStr=post.date.toString();if(post.file&&user){return/*#__PURE__*/React.createElement(\"li\",{className:\"post-item-li\",\"data-aos\":\"zoom-out-right\",\"data-aos-once\":\"true\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-item\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{className:\"post-item-image\",src:post.file,alt:\"uploaded by user to accompany post\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"post-item-text\"},post.text),/*#__PURE__*/React.createElement(\"div\",{className:\"post-item-footer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-item-posted\"},\"Posted by\",\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"post-item-username\",onClick:this.handleClick},user.username)),/*#__PURE__*/React.createElement(Moment,{format:\"MMM DD, YYYY [at] h:mmA\",className:\"post-date\"},dateStr),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(LikesDislikes,{postId:post._id,userId:user._id,currentUserId:this.props.currentUser.id}),this.props.currentUser.id===user._id?/*#__PURE__*/React.createElement(\"button\",{className:\"post-item-footer-button\",onClick:this.handleButton},\"Delete\"):/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(CommentForm,{currentUser:this.props.currentUser,composeComment:this.props.composeComment// currentPost={this.props.currentPost}\n,currentPost:this.props.post}),/*#__PURE__*/React.createElement(\"div\",{className:\"show-hide-comments\",onClick:function onClick(){return _this2.onClick();}},this.state.commentDisplayText),this.state.showComments?/*#__PURE__*/React.createElement(CommentsList,{currentPost:this.props.post,comments:this.props.comments,fetchPostComments:this.props.fetchPostComments,fetchComment:this.props.fetchComment,removeComment:this.props.removeComment,isLoggedIn:this.props.isLoggedIn,currentUser:this.props.currentUser,fetchAllComments:this.props.fetchAllComments}):null));}else if(!post.file&&user){return/*#__PURE__*/React.createElement(\"li\",{className:\"post-item-li\",\"data-aos\":\"zoom-out-right\",\"data-aos-once\":\"true\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-item-text\"},post.text),/*#__PURE__*/React.createElement(\"div\",{className:\"post-item-footer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-item-posted\"},\"Posted by\",\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"post-item-username\",onClick:this.handleClick},user.username)),/*#__PURE__*/React.createElement(Moment,{format:\"MMM DD, YYYY [at] h:mmA\",className:\"post-date\"},dateStr),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(LikesDislikes,{postId:post._id,userId:user._id,currentUserId:this.props.currentUser.id}),this.props.currentUser.id===user._id?/*#__PURE__*/React.createElement(\"button\",{className:\"post-item-footer-button\",onClick:this.handleButton},\"Delete\"):/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(CommentForm,{currentUser:this.props.currentUser,composeComment:this.props.composeComment,currentPost:this.props.post}),/*#__PURE__*/React.createElement(\"div\",{className:\"show-hide-comments\",onClick:function onClick(){return _this2.onClick();}},this.state.commentDisplayText),this.state.showComments?/*#__PURE__*/React.createElement(CommentsList,{currentPost:this.props.post,comments:this.props.comments,fetchPostComments:this.props.fetchPostComments,fetchComment:this.props.fetchComment,removeComment:this.props.removeComment,isLoggedIn:this.props.isLoggedIn,currentUser:this.props.currentUser,fetchAllComments:this.props.fetchAllComments}):null));}else{return null;}}}]);return PostItem;}(React.Component);export default PostItem;","map":{"version":3,"sources":["/Users/catherinekimyj/Desktop/profferly/frontend/src/components/posts/post_item.js"],"names":["React","Moment","CommentsList","CommentForm","LikesDislikes","PostItem","props","handleClick","bind","handleButton","state","showComments","commentDisplayText","history","push","post","user","e","preventDefault","removePost","_id","go","setState","prevState","users","dateStr","date","toString","file","text","username","currentUser","id","composeComment","onClick","comments","fetchPostComments","fetchComment","removeComment","isLoggedIn","fetchAllComments","Component"],"mappings":"m0BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,C,GAEMC,CAAAA,Q,gHACJ,kBAAYC,KAAZ,CAAmB,0CACjB,uBAAMA,KAAN,EACA,MAAKC,WAAL,CAAmB,MAAKA,WAAL,CAAiBC,IAAjB,+BAAnB,CACA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB,CACA,MAAKE,KAAL,CAAa,CAAEC,YAAY,CAAE,KAAhB,CAAuBC,kBAAkB,CAAE,eAA3C,CAAb,CAJiB,aAKlB,C,sEAEa,CACZ,KAAKN,KAAL,CAAWO,OAAX,CAAmBC,IAAnB,kBAAkC,KAAKR,KAAL,CAAWS,IAAX,CAAgBC,IAAlD,GACD,C,kDAEYC,C,CAAG,CACdA,CAAC,CAACC,cAAF,GACA,KAAKZ,KAAL,CAAWa,UAAX,CAAsB,KAAKb,KAAL,CAAWS,IAAX,CAAgBK,GAAtC,EACA,KAAKd,KAAL,CAAWO,OAAX,CAAmBQ,EAAnB,GACD,C,yCAES,CACR,GAAI,KAAKX,KAAL,CAAWE,kBAAX,GAAkC,eAAtC,CAAuD,CACrD,KAAKU,QAAL,CAAc,SAACC,SAAD,QAAgB,CAC5BZ,YAAY,CAAE,CAACY,SAAS,CAACZ,YADG,CAE5BC,kBAAkB,CAAE,eAFQ,CAAhB,EAAd,EAID,CALD,IAKO,CACL,KAAKU,QAAL,CAAc,SAACC,SAAD,QAAgB,CAC5BZ,YAAY,CAAE,CAACY,SAAS,CAACZ,YADG,CAE5BC,kBAAkB,CAAE,eAFQ,CAAhB,EAAd,EAID,CACF,C,uCAEQ,iBACP,GAAMG,CAAAA,IAAI,CAAG,KAAKT,KAAL,CAAWS,IAAxB,CACA,GAAMC,CAAAA,IAAI,CAAG,KAAKV,KAAL,CAAWkB,KAAX,CAAiB,KAAKlB,KAAL,CAAWS,IAAX,CAAgBC,IAAjC,CAAb,CACA,GAAMS,CAAAA,OAAO,CAAGV,IAAI,CAACW,IAAL,CAAUC,QAAV,EAAhB,CAEA,GAAIZ,IAAI,CAACa,IAAL,EAAaZ,IAAjB,CAAuB,CACrB,mBACE,0BACE,SAAS,CAAC,cADZ,CAEE,WAAS,gBAFX,CAGE,gBAAc,MAHhB,eAKE,2BAAK,SAAS,CAAC,WAAf,eACE,4CACE,2BACE,SAAS,CAAC,iBADZ,CAEE,GAAG,CAAED,IAAI,CAACa,IAFZ,CAGE,GAAG,CAAC,oCAHN,EADF,CADF,cAQE,2BAAK,SAAS,CAAC,gBAAf,EAAiCb,IAAI,CAACc,IAAtC,CARF,cASE,2BAAK,SAAS,CAAC,kBAAf,eACE,2BAAK,SAAS,CAAC,kBAAf,cACY,GADZ,cAEE,4BAAM,SAAS,CAAC,oBAAhB,CAAqC,OAAO,CAAE,KAAKtB,WAAnD,EACGS,IAAI,CAACc,QADR,CAFF,CADF,cAOE,oBAAC,MAAD,EAAQ,MAAM,CAAC,yBAAf,CAAyC,SAAS,CAAC,WAAnD,EACGL,OADH,CAPF,cAUE,8BAVF,cAWE,oBAAC,aAAD,EACE,MAAM,CAAEV,IAAI,CAACK,GADf,CAEE,MAAM,CAAEJ,IAAI,CAACI,GAFf,CAGE,aAAa,CAAE,KAAKd,KAAL,CAAWyB,WAAX,CAAuBC,EAHxC,EAXF,CAgBG,KAAK1B,KAAL,CAAWyB,WAAX,CAAuBC,EAAvB,GAA8BhB,IAAI,CAACI,GAAnC,cACC,8BACE,SAAS,CAAC,yBADZ,CAEE,OAAO,CAAE,KAAKX,YAFhB,WADD,cAQC,+BAxBJ,CATF,cAqCE,oBAAC,WAAD,EACE,WAAW,CAAE,KAAKH,KAAL,CAAWyB,WAD1B,CAEE,cAAc,CAAE,KAAKzB,KAAL,CAAW2B,cAC3B;AAHF,CAIE,WAAW,CAAE,KAAK3B,KAAL,CAAWS,IAJ1B,EArCF,cA2CE,2BAAK,SAAS,CAAC,oBAAf,CAAoC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACmB,OAAL,EAAN,EAA7C,EACG,KAAKxB,KAAL,CAAWE,kBADd,CA3CF,CA8CG,KAAKF,KAAL,CAAWC,YAAX,cACC,oBAAC,YAAD,EACE,WAAW,CAAE,KAAKL,KAAL,CAAWS,IAD1B,CAEE,QAAQ,CAAE,KAAKT,KAAL,CAAW6B,QAFvB,CAGE,iBAAiB,CAAE,KAAK7B,KAAL,CAAW8B,iBAHhC,CAIE,YAAY,CAAE,KAAK9B,KAAL,CAAW+B,YAJ3B,CAKE,aAAa,CAAE,KAAK/B,KAAL,CAAWgC,aAL5B,CAME,UAAU,CAAE,KAAKhC,KAAL,CAAWiC,UANzB,CAOE,WAAW,CAAE,KAAKjC,KAAL,CAAWyB,WAP1B,CAQE,gBAAgB,CAAE,KAAKzB,KAAL,CAAWkC,gBAR/B,EADD,CAWG,IAzDN,CALF,CADF,CAmED,CApED,IAoEO,IAAI,CAACzB,IAAI,CAACa,IAAN,EAAcZ,IAAlB,CAAwB,CAC7B,mBACE,0BACE,SAAS,CAAC,cADZ,CAEE,WAAS,gBAFX,CAGE,gBAAc,MAHhB,eAKE,2BAAK,SAAS,CAAC,WAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,EAAiCD,IAAI,CAACc,IAAtC,CADF,cAEE,2BAAK,SAAS,CAAC,kBAAf,eACE,2BAAK,SAAS,CAAC,kBAAf,cACY,GADZ,cAEE,4BAAM,SAAS,CAAC,oBAAhB,CAAqC,OAAO,CAAE,KAAKtB,WAAnD,EACGS,IAAI,CAACc,QADR,CAFF,CADF,cAOE,oBAAC,MAAD,EAAQ,MAAM,CAAC,yBAAf,CAAyC,SAAS,CAAC,WAAnD,EACGL,OADH,CAPF,cAUE,8BAVF,cAWE,oBAAC,aAAD,EACE,MAAM,CAAEV,IAAI,CAACK,GADf,CAEE,MAAM,CAAEJ,IAAI,CAACI,GAFf,CAGE,aAAa,CAAE,KAAKd,KAAL,CAAWyB,WAAX,CAAuBC,EAHxC,EAXF,CAgBG,KAAK1B,KAAL,CAAWyB,WAAX,CAAuBC,EAAvB,GAA8BhB,IAAI,CAACI,GAAnC,cACC,8BACE,SAAS,CAAC,yBADZ,CAEE,OAAO,CAAE,KAAKX,YAFhB,WADD,cAQC,+BAxBJ,CAFF,cA8BE,oBAAC,WAAD,EACE,WAAW,CAAE,KAAKH,KAAL,CAAWyB,WAD1B,CAEE,cAAc,CAAE,KAAKzB,KAAL,CAAW2B,cAF7B,CAGE,WAAW,CAAE,KAAK3B,KAAL,CAAWS,IAH1B,EA9BF,cAmCE,2BAAK,SAAS,CAAC,oBAAf,CAAoC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACmB,OAAL,EAAN,EAA7C,EACG,KAAKxB,KAAL,CAAWE,kBADd,CAnCF,CAsCG,KAAKF,KAAL,CAAWC,YAAX,cACC,oBAAC,YAAD,EACE,WAAW,CAAE,KAAKL,KAAL,CAAWS,IAD1B,CAEE,QAAQ,CAAE,KAAKT,KAAL,CAAW6B,QAFvB,CAGE,iBAAiB,CAAE,KAAK7B,KAAL,CAAW8B,iBAHhC,CAIE,YAAY,CAAE,KAAK9B,KAAL,CAAW+B,YAJ3B,CAKE,aAAa,CAAE,KAAK/B,KAAL,CAAWgC,aAL5B,CAME,UAAU,CAAE,KAAKhC,KAAL,CAAWiC,UANzB,CAOE,WAAW,CAAE,KAAKjC,KAAL,CAAWyB,WAP1B,CAQE,gBAAgB,CAAE,KAAKzB,KAAL,CAAWkC,gBAR/B,EADD,CAWG,IAjDN,CALF,CADF,CA2DD,CA5DM,IA4DA,CACL,MAAO,KAAP,CACD,CACF,C,sBAxKoBxC,KAAK,CAACyC,S,EA2K7B,cAAepC,CAAAA,QAAf","sourcesContent":["import React from \"react\";\nimport Moment from \"react-moment\";\nimport \"./post.css\";\nimport CommentsList from \"../comments/comments_list\";\nimport CommentForm from \"../comments/comment_form\";\nimport LikesDislikes from \"../likesdislikes/likes_dislikes\";\n\nclass PostItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleButton = this.handleButton.bind(this);\n    this.state = { showComments: false, commentDisplayText: \"Show Comments\" };\n  }\n\n  handleClick() {\n    this.props.history.push(`/users/${this.props.post.user}`);\n  }\n\n  handleButton(e) {\n    e.preventDefault();\n    this.props.removePost(this.props.post._id);\n    this.props.history.go();\n  }\n\n  onClick() {\n    if (this.state.commentDisplayText === \"Show Comments\") {\n      this.setState((prevState) => ({\n        showComments: !prevState.showComments,\n        commentDisplayText: \"Hide Comments\",\n      }));\n    } else {\n      this.setState((prevState) => ({\n        showComments: !prevState.showComments,\n        commentDisplayText: \"Show Comments\",\n      }));\n    }\n  }\n\n  render() {\n    const post = this.props.post;\n    const user = this.props.users[this.props.post.user];\n    const dateStr = post.date.toString();\n\n    if (post.file && user) {\n      return (\n        <li\n          className=\"post-item-li\"\n          data-aos=\"zoom-out-right\"\n          data-aos-once=\"true\"\n        >\n          <div className=\"post-item\">\n            <div>\n              <img\n                className=\"post-item-image\"\n                src={post.file}\n                alt=\"uploaded by user to accompany post\"\n              />\n            </div>\n            <div className=\"post-item-text\">{post.text}</div>\n            <div className=\"post-item-footer\">\n              <div className=\"post-item-posted\">\n                Posted by{\" \"}\n                <span className=\"post-item-username\" onClick={this.handleClick}>\n                  {user.username}\n                </span>\n              </div>\n              <Moment format=\"MMM DD, YYYY [at] h:mmA\" className=\"post-date\">\n                {dateStr}\n              </Moment>\n              <br />\n              <LikesDislikes\n                postId={post._id}\n                userId={user._id}\n                currentUserId={this.props.currentUser.id}\n              />\n              {this.props.currentUser.id === user._id ? (\n                <button\n                  className=\"post-item-footer-button\"\n                  onClick={this.handleButton}\n                >\n                  Delete\n                </button>\n              ) : (\n                <div></div>\n              )}\n            </div>\n\n            <CommentForm\n              currentUser={this.props.currentUser}\n              composeComment={this.props.composeComment}\n              // currentPost={this.props.currentPost}\n              currentPost={this.props.post}\n            />\n            <div className=\"show-hide-comments\" onClick={() => this.onClick()}>\n              {this.state.commentDisplayText}\n            </div>\n            {this.state.showComments ? (\n              <CommentsList\n                currentPost={this.props.post}\n                comments={this.props.comments}\n                fetchPostComments={this.props.fetchPostComments}\n                fetchComment={this.props.fetchComment}\n                removeComment={this.props.removeComment}\n                isLoggedIn={this.props.isLoggedIn}\n                currentUser={this.props.currentUser}\n                fetchAllComments={this.props.fetchAllComments}\n              />\n            ) : null}\n          </div>\n        </li>\n      );\n    } else if (!post.file && user) {\n      return (\n        <li\n          className=\"post-item-li\"\n          data-aos=\"zoom-out-right\"\n          data-aos-once=\"true\"\n        >\n          <div className=\"post-item\">\n            <div className=\"post-item-text\">{post.text}</div>\n            <div className=\"post-item-footer\">\n              <div className=\"post-item-posted\">\n                Posted by{\" \"}\n                <span className=\"post-item-username\" onClick={this.handleClick}>\n                  {user.username}\n                </span>\n              </div>\n              <Moment format=\"MMM DD, YYYY [at] h:mmA\" className=\"post-date\">\n                {dateStr}\n              </Moment>\n              <br />\n              <LikesDislikes\n                postId={post._id}\n                userId={user._id}\n                currentUserId={this.props.currentUser.id}\n              />\n              {this.props.currentUser.id === user._id ? (\n                <button\n                  className=\"post-item-footer-button\"\n                  onClick={this.handleButton}\n                >\n                  Delete\n                </button>\n              ) : (\n                <div></div>\n              )}\n            </div>\n\n            <CommentForm\n              currentUser={this.props.currentUser}\n              composeComment={this.props.composeComment}\n              currentPost={this.props.post}\n            />\n            <div className=\"show-hide-comments\" onClick={() => this.onClick()}>\n              {this.state.commentDisplayText}\n            </div>\n            {this.state.showComments ? (\n              <CommentsList\n                currentPost={this.props.post}\n                comments={this.props.comments}\n                fetchPostComments={this.props.fetchPostComments}\n                fetchComment={this.props.fetchComment}\n                removeComment={this.props.removeComment}\n                isLoggedIn={this.props.isLoggedIn}\n                currentUser={this.props.currentUser}\n                fetchAllComments={this.props.fetchAllComments}\n              />\n            ) : null}\n          </div>\n        </li>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default PostItem;\n"]},"metadata":{},"sourceType":"module"}