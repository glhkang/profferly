{"ast":null,"code":"import _classCallCheck from\"/Users/catherinekimyj/Desktop/profferly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/catherinekimyj/Desktop/profferly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/catherinekimyj/Desktop/profferly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/catherinekimyj/Desktop/profferly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{GoogleApiWrapper,InfoWindow,Map,Marker}from\"google-maps-react\";import*as MarkerApiUtil from\"../../util/marker_util\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faHome}from\"@fortawesome/free-solid-svg-icons\";var MapContainer=/*#__PURE__*/function(_React$Component){_inherits(MapContainer,_React$Component);var _super=_createSuper(MapContainer);function MapContainer(_props){var _this;_classCallCheck(this,MapContainer);_this=_super.call(this,_props);_this.onMapClick=function(mapProps,map,clickEvent){var lat=clickEvent.latLng.lat();var lng=clickEvent.latLng.lng();_this.props.history.push({pathname:\"/form\",state:{latitude:lat,longitude:lng}});};_this.onMarkerClick=function(props,marker,e){_this.setState({activeMarkerName:props.name,activeMarkerTitle:props.title,activeMarkerId:props.id,activeMarkerRevision:props.revision,activeMarker:marker,showingInfoWindow:true});};_this.onRenameClick=function(){var markers=_this.state.markers;var marker=markers.find(function(o){return o.id===_this.state.activeMarkerId;});if(marker){marker.revision++;}_this.setState({markers:markers},function(){console.log(\"Markers after update\",_this.state.markers);});};_this.state={markers:[]};return _this;}_createClass(MapContainer,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// LOAD MARKERS -- GET http://api/marker\nMarkerApiUtil.getMarkers().then(function(markers){return _this2.setState({markers:Object.values(markers)[0]});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"map-window\"},/*#__PURE__*/React.createElement(\"button\",{className:\"home-button\",onClick:function onClick(e){e.preventDefault();_this3.props.history.push(\"/posts\");}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"home-icon\",icon:faHome})),/*#__PURE__*/React.createElement(Map,{google:this.props.google,zoom:4,onClick:this.onMapClick,initialCenter:{lat:40.7128,lng:-74.006},className:\"google-map\"},this.state.markers.map(function(marker,index// {title: \"\", des: \"\", lat: , lng: }\n){return/*#__PURE__*/React.createElement(Marker,{key:index,title:marker.title,name:marker.description,position:{lat:marker.latitude,lng:marker.longitude},onClick:_this3.onMarkerClick});}),/*#__PURE__*/React.createElement(InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,this.state.activeMarkerTitle),/*#__PURE__*/React.createElement(\"p\",null,this.state.activeMarkerName)))));}}]);return MapContainer;}(React.Component);export default GoogleApiWrapper({apiKey:\"\".concat(process.env.REACT_APP_GOOGLE_API_KEY)})(MapContainer);","map":{"version":3,"sources":["/Users/catherinekimyj/Desktop/profferly/frontend/src/components/map/map.js"],"names":["React","GoogleApiWrapper","InfoWindow","Map","Marker","MarkerApiUtil","FontAwesomeIcon","faHome","MapContainer","props","onMapClick","mapProps","map","clickEvent","lat","latLng","lng","history","push","pathname","state","latitude","longitude","onMarkerClick","marker","e","setState","activeMarkerName","name","activeMarkerTitle","title","activeMarkerId","id","activeMarkerRevision","revision","activeMarker","showingInfoWindow","onRenameClick","markers","find","o","console","log","getMarkers","then","Object","values","preventDefault","google","index","description","Component","apiKey","process","env","REACT_APP_GOOGLE_API_KEY"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { GoogleApiWrapper, InfoWindow, Map, Marker } from \"google-maps-react\";\nimport * as MarkerApiUtil from \"../../util/marker_util\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faHome } from \"@fortawesome/free-solid-svg-icons\";\n\nclass MapContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      markers: [],\n    };\n  }\n\n  componentDidMount() {\n    // LOAD MARKERS -- GET http://api/marker\n    MarkerApiUtil.getMarkers().then((markers) =>\n      this.setState({ markers: Object.values(markers)[0] })\n    );\n  }\n\n  onMapClick = (mapProps, map, clickEvent) => {\n    const lat = clickEvent.latLng.lat();\n    const lng = clickEvent.latLng.lng();\n\n    this.props.history.push({\n      pathname: \"/form\",\n      state: { latitude: lat, longitude: lng },\n    });\n  };\n\n  onMarkerClick = (props, marker, e) => {\n    this.setState({\n      activeMarkerName: props.name,\n      activeMarkerTitle: props.title,\n      activeMarkerId: props.id,\n      activeMarkerRevision: props.revision,\n      activeMarker: marker,\n      showingInfoWindow: true,\n    });\n  };\n\n  onRenameClick = () => {\n    const markers = this.state.markers;\n    const marker = markers.find((o) => o.id === this.state.activeMarkerId);\n\n    if (marker) {\n      marker.revision++;\n    }\n\n    this.setState({ markers }, () => {\n      console.log(\"Markers after update\", this.state.markers);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"map-window\">\n        <button\n          className=\"home-button\"\n          onClick={(e) => {\n            e.preventDefault();\n            this.props.history.push(\"/posts\");\n          }}\n        >\n          <FontAwesomeIcon className=\"home-icon\" icon={faHome} />\n        </button>\n\n        <Map\n          google={this.props.google}\n          zoom={4}\n          onClick={this.onMapClick}\n          initialCenter={{ lat: 40.7128, lng: -74.006 }}\n          className=\"google-map\"\n        >\n          {this.state.markers.map((\n            marker,\n            index // {title: \"\", des: \"\", lat: , lng: }\n          ) => (\n            <Marker\n              key={index}\n              title={marker.title}\n              name={marker.description}\n              position={{ lat: marker.latitude, lng: marker.longitude }}\n              onClick={this.onMarkerClick}\n            />\n          ))}\n          <InfoWindow\n            marker={this.state.activeMarker}\n            visible={this.state.showingInfoWindow}\n          >\n            <div>\n              <h1>{this.state.activeMarkerTitle}</h1>\n              <p>{this.state.activeMarkerName}</p>\n            </div>\n          </InfoWindow>\n        </Map>\n      </div>\n    );\n  }\n}\n\nexport default GoogleApiWrapper({\n  apiKey: `${process.env.REACT_APP_GOOGLE_API_KEY}`,\n})(MapContainer);\n"]},"metadata":{},"sourceType":"module"}